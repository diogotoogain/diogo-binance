<!DOCTYPE html>
<html lang="pt-BR" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SNAME-MR Trading Bot Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f0f0f;
        }
        .card {
            background: linear-gradient(145deg, #1a1a1a, #141414);
            border: 1px solid #2a2a2a;
            transition: all 0.3s ease;
        }
        .card:hover {
            border-color: #3a3a3a;
        }
        .pulse-green {
            animation: pulseGreen 2s infinite;
        }
        .pulse-red {
            animation: pulseRed 2s infinite;
        }
        @keyframes pulseGreen {
            0%, 100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4); }
            50% { box-shadow: 0 0 0 8px rgba(34, 197, 94, 0); }
        }
        @keyframes pulseRed {
            0%, 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); }
            50% { box-shadow: 0 0 0 8px rgba(239, 68, 68, 0); }
        }
        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            display: inline-block;
        }
        .status-live { background-color: #22c55e; }
        .status-offline { background-color: #ef4444; }
        .log-info { color: #60a5fa; }
        .log-warning { color: #fbbf24; }
        .log-error { color: #ef4444; }
        #logs-container {
            max-height: 200px;
            overflow-y: auto;
        }
        #logs-container::-webkit-scrollbar {
            width: 6px;
        }
        #logs-container::-webkit-scrollbar-track {
            background: #1a1a1a;
        }
        #logs-container::-webkit-scrollbar-thumb {
            background: #3a3a3a;
            border-radius: 3px;
        }
        .progress-bar {
            height: 8px;
            background: #2a2a2a;
            border-radius: 4px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        .animate-fade-in {
            animation: fadeIn 0.5s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="min-h-screen text-gray-100 p-4 md:p-6">
    <!-- Header -->
    <header class="mb-6">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
            <div class="flex items-center gap-3">
                <span class="text-3xl">ü§ñ</span>
                <div>
                    <h1 class="text-2xl font-bold text-white">SNAME-MR TRADING BOT</h1>
                    <p class="text-sm text-gray-500">Sistema de Trading Automatizado</p>
                </div>
            </div>
            <div class="flex items-center gap-4">
                <div class="flex items-center gap-2">
                    <span id="status-dot" class="status-dot status-offline"></span>
                    <span id="status-text" class="text-sm text-gray-400">Conectando...</span>
                </div>
                <span id="testnet-badge" class="px-3 py-1 bg-yellow-500/20 text-yellow-400 text-sm rounded-full hidden">Testnet</span>
                <span id="uptime" class="text-sm text-gray-500">Uptime: 00:00:00</span>
            </div>
        </div>
    </header>

    <!-- Main Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
        <!-- Balance Card -->
        <div class="card rounded-xl p-5">
            <div class="flex items-center gap-2 mb-4">
                <span class="text-xl">üí∞</span>
                <h2 class="text-lg font-semibold text-gray-300">SALDO</h2>
            </div>
            <div class="space-y-3">
                <div>
                    <p class="text-sm text-gray-500">Saldo Total</p>
                    <p id="total-balance" class="text-2xl font-bold text-white">$0.00</p>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <p class="text-xs text-gray-500">Dispon√≠vel</p>
                        <p id="available-balance" class="text-sm text-gray-300">$0.00</p>
                    </div>
                    <div>
                        <p class="text-xs text-gray-500">Em Margem</p>
                        <p id="margin-balance" class="text-sm text-gray-300">$0.00</p>
                    </div>
                </div>
                <div class="pt-2 border-t border-gray-800">
                    <div class="flex justify-between items-center">
                        <span class="text-xs text-gray-500">PnL N√£o Realizado</span>
                        <span id="unrealized-pnl" class="text-sm font-medium text-gray-300">$0.00</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Price Card -->
        <div class="card rounded-xl p-5">
            <div class="flex items-center gap-2 mb-4">
                <span class="text-xl">üìä</span>
                <h2 class="text-lg font-semibold text-gray-300">BTC/USDT</h2>
            </div>
            <div class="space-y-3">
                <div class="flex items-end gap-2">
                    <p id="current-price" class="text-3xl font-bold text-white">$0.00</p>
                    <span id="price-change" class="text-sm text-gray-500 pb-1">0.00%</span>
                </div>
                <div class="flex justify-between text-sm">
                    <span class="text-gray-500">Volume 24h:</span>
                    <span id="volume-24h" class="text-gray-300">$0.00</span>
                </div>
            </div>
        </div>

        <!-- Position Card -->
        <div class="card rounded-xl p-5">
            <div class="flex items-center gap-2 mb-4">
                <span class="text-xl">üìç</span>
                <h2 class="text-lg font-semibold text-gray-300">POSI√á√ÉO</h2>
            </div>
            <div id="position-content">
                <div id="no-position" class="text-center py-4">
                    <p class="text-gray-500">Sem posi√ß√£o aberta</p>
                </div>
                <div id="has-position" class="hidden space-y-3">
                    <div class="flex items-center gap-2">
                        <span id="position-side" class="px-3 py-1 rounded-full text-sm font-medium">LONG</span>
                        <span id="position-qty" class="text-lg font-bold text-white">0.000</span>
                    </div>
                    <div class="grid grid-cols-2 gap-3 text-sm">
                        <div>
                            <p class="text-xs text-gray-500">Pre√ßo Entrada</p>
                            <p id="entry-price" class="text-gray-300">$0.00</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-500">PnL</p>
                            <p id="position-pnl" class="font-medium">$0.00</p>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-3 text-sm">
                        <div>
                            <p class="text-xs text-gray-500">üõë Stop Loss</p>
                            <p id="stop-loss" class="text-red-400">$0.00</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-500">üéØ Take Profit</p>
                            <p id="take-profit" class="text-green-400">$0.00</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Price Chart -->
    <div class="card rounded-xl p-5 mb-6">
        <div class="flex items-center gap-2 mb-4">
            <span class="text-xl">üìà</span>
            <h2 class="text-lg font-semibold text-gray-300">GR√ÅFICO DE PRE√áO</h2>
            <span class="text-xs text-gray-500">(√∫ltimos 100 ticks)</span>
        </div>
        <div class="h-64">
            <canvas id="priceChart"></canvas>
        </div>
    </div>

    <!-- Strategies and Meta Controller -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6">
        <!-- Strategies -->
        <div class="card rounded-xl p-5">
            <div class="flex items-center gap-2 mb-4">
                <span class="text-xl">üß†</span>
                <h2 class="text-lg font-semibold text-gray-300">ESTRAT√âGIAS</h2>
            </div>
            <div id="strategies-container" class="space-y-4">
                <!-- VPIN -->
                <div class="strategy-item" data-strategy="VPINDetector">
                    <div class="flex justify-between items-center mb-1">
                        <span class="text-sm text-gray-400">VPIN</span>
                        <span class="vpin-value text-sm font-medium text-gray-300">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="vpin-progress progress-fill bg-blue-500" style="width: 0%"></div>
                    </div>
                </div>
                <!-- OBI -->
                <div class="strategy-item" data-strategy="OBI">
                    <div class="flex justify-between items-center mb-1">
                        <span class="text-sm text-gray-400">OBI</span>
                        <span class="obi-value text-sm font-medium text-gray-300">0.00</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <div class="flex-1 progress-bar">
                            <div class="obi-progress progress-fill bg-purple-500" style="width: 50%; margin-left: 50%"></div>
                        </div>
                        <span class="obi-indicator text-xs">‚ö™</span>
                    </div>
                </div>
                <!-- Flow Imbalance -->
                <div class="strategy-item" data-strategy="FlowImbalance">
                    <div class="flex justify-between items-center mb-1">
                        <span class="text-sm text-gray-400">Flow Imbalance</span>
                        <span class="flow-value text-sm font-medium text-gray-300">50%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="flow-progress progress-fill bg-orange-500" style="width: 50%"></div>
                    </div>
                </div>
                <!-- Rolling VWAP -->
                <div class="strategy-item" data-strategy="RollingVWAP">
                    <div class="flex justify-between items-center mb-1">
                        <span class="text-sm text-gray-400">Rolling VWAP</span>
                        <span class="vwap-value text-sm font-medium text-gray-300">$0.00</span>
                    </div>
                    <div class="flex items-center gap-2 text-xs text-gray-500">
                        <span>Pre√ßo vs VWAP:</span>
                        <span class="vwap-indicator">-</span>
                    </div>
                </div>
                <!-- Cascade Liquidation -->
                <div class="strategy-item" data-strategy="CascadeLiquidation">
                    <div class="flex justify-between items-center mb-1">
                        <span class="text-sm text-gray-400">Cascade Liquidation</span>
                        <span class="cascade-value text-sm font-medium text-gray-300">-</span>
                    </div>
                    <div class="text-xs text-gray-500">
                        <span>√öltima cascata: </span>
                        <span class="cascade-last">Nenhuma</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Meta Controller -->
        <div class="card rounded-xl p-5">
            <div class="flex items-center gap-2 mb-4">
                <span class="text-xl">üéØ</span>
                <h2 class="text-lg font-semibold text-gray-300">META-CONTROLLER</h2>
            </div>
            <div class="space-y-4">
                <div class="text-center py-4">
                    <p class="text-sm text-gray-500 mb-2">Decis√£o Atual</p>
                    <div id="meta-decision" class="inline-flex items-center gap-2 px-6 py-3 rounded-full bg-gray-800">
                        <span class="decision-icon text-2xl">‚ö™</span>
                        <span class="decision-text text-xl font-bold text-gray-400">HOLD</span>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-4 text-center">
                    <div>
                        <p class="text-xs text-gray-500">Confian√ßa</p>
                        <p id="meta-confidence" class="text-lg font-medium text-gray-300">-</p>
                    </div>
                    <div>
                        <p class="text-xs text-gray-500">Estrat√©gias Concordando</p>
                        <p id="meta-agreeing" class="text-lg font-medium text-gray-300">0</p>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-4 text-center">
                    <div>
                        <p class="text-xs text-gray-500">Score</p>
                        <p id="meta-score" class="text-lg font-medium text-gray-300">0.00</p>
                    </div>
                    <div>
                        <p class="text-xs text-gray-500">Total Decis√µes</p>
                        <p id="meta-decisions" class="text-lg font-medium text-gray-300">0</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Trades and Liquidations -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6">
        <!-- Trade History -->
        <div class="card rounded-xl p-5">
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center gap-2">
                    <span class="text-xl">üìú</span>
                    <h2 class="text-lg font-semibold text-gray-300">HIST√ìRICO DE TRADES</h2>
                </div>
                <div class="flex items-center gap-4 text-sm">
                    <span class="text-gray-500">Win Rate:</span>
                    <span id="win-rate" class="font-medium text-green-400">0%</span>
                </div>
            </div>
            <div id="trades-container" class="space-y-2 max-h-48 overflow-y-auto">
                <p class="text-gray-500 text-center py-4">Nenhum trade ainda</p>
            </div>
            <div class="mt-4 pt-3 border-t border-gray-800 flex justify-between text-sm">
                <span class="text-gray-500">Total PnL:</span>
                <span id="total-pnl" class="font-medium text-gray-300">$0.00</span>
            </div>
        </div>

        <!-- Liquidations -->
        <div class="card rounded-xl p-5">
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center gap-2">
                    <span class="text-xl">üíÄ</span>
                    <h2 class="text-lg font-semibold text-gray-300">LIQUIDA√á√ïES</h2>
                </div>
                <div class="text-sm">
                    <span class="text-gray-500">Total: </span>
                    <span id="total-liq-volume" class="font-medium text-gray-300">$0</span>
                </div>
            </div>
            <div id="liquidations-container" class="space-y-2 max-h-48 overflow-y-auto">
                <p class="text-gray-500 text-center py-4">Nenhuma liquida√ß√£o detectada</p>
            </div>
        </div>
    </div>

    <!-- Logs -->
    <div class="card rounded-xl p-5">
        <div class="flex items-center gap-2 mb-4">
            <span class="text-xl">üìã</span>
            <h2 class="text-lg font-semibold text-gray-300">LOGS</h2>
        </div>
        <div id="logs-container" class="font-mono text-xs space-y-1">
            <p class="text-gray-500">Aguardando logs...</p>
        </div>
    </div>

    <script src="/static/dashboard.js"></script>
</body>
</html>
