# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# V2 MULTI-STRATEGY QUANT TRADING BOT - MASTER CONFIGURATION
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 
# ğŸ¯ FILOSOFIA CORE:
#   - ğŸš« NENHUM nÃºmero hardcoded - Tudo Ã© parÃ¢metro otimizÃ¡vel
#   - âœ… TUDO parametrizÃ¡vel via config YAML
#   - âœ… Kill switch SEMPRE ativo (nunca desativar!)
#   - âœ… ~150 parÃ¢metros otimizÃ¡veis via Optuna/RL
#
# ğŸ“ FORMATO DOS COMENTÃRIOS OPTIMIZE:
#   # OPTIMIZE: [lista de valores discretos] ou range(min, max)
#
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ENVIRONMENT
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
environment:
  mode: "demo"                    # demo | live
  use_demo_header: true           # Usar header X-MBX-DEMO
  api_base_url: "https://fapi.binance.com"
  testnet_url: "https://testnet.binancefuture.com"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# MARKET
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
market:
  exchange: "binance"
  symbol: "BTCUSDT"
  base_asset: "BTC"
  quote_asset: "USDT"
  tick_size: 0.10
  lot_size: 0.001
  min_notional: 5.0

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# DATA
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
data:
  timeframes:
    - "1s"
    - "1m"
    - "5m"
    - "15m"
    - "1h"
    - "4h"
  primary_timeframe: "1m"         # OPTIMIZE: ["1s", "1m", "5m"]
  
  bar_construction:
    type: "time"                  # OPTIMIZE: ["time", "volume", "dollar"]
    volume_bar_threshold: 100     # OPTIMIZE: range(50, 500)
    dollar_bar_threshold: 10000000  # OPTIMIZE: range(5000000, 50000000)
  
  historical:
    default_months: 6
    chunk_size_days: 7
    rate_limit_delay: 0.5         # segundos entre requests
  
  storage:
    format: "parquet"
    compression: "snappy"
    partition_by: "date"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# WEBSOCKET
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
websocket:
  enabled: true
  buffer_size: 10000              # IMPORTANTE: Buffer grande para evitar overflow!
  reconnect_delay: 1.0            # OPTIMIZE: range(0.5, 5.0)
  max_reconnect_attempts: 10      # OPTIMIZE: range(5, 20)
  ping_interval: 30               # segundos
  ping_timeout: 10                # segundos
  health_check_interval: 60       # segundos
  
  streams:
    trades: true
    klines: true
    depth: true
    ticker: true
  
  depth_levels: 20                # OPTIMIZE: [5, 10, 20]

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# FEATURES - MICROSTRUCTURE
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
features:
  microstructure:
    enabled: true                 # OPTIMIZE: [true, false]
    
    ofi:  # Order Flow Imbalance
      enabled: true               # OPTIMIZE: [true, false]
      window: 20                  # OPTIMIZE: [5, 10, 20, 50, 100]
      normalize: true
    
    tfi:  # Trade Flow Imbalance
      enabled: true               # OPTIMIZE: [true, false]
      window: 20                  # OPTIMIZE: [5, 10, 20, 50, 100]
    
    micro_price:
      enabled: true               # OPTIMIZE: [true, false]
    
    entropy:
      enabled: true               # OPTIMIZE: [true, false]
      window: 50                  # OPTIMIZE: [20, 50, 100, 200]
    
    vpin:  # Volume-Synchronized Probability of Informed Trading
      enabled: true               # OPTIMIZE: [true, false]
      n_buckets: 50               # OPTIMIZE: [20, 50, 100]
      window: 50                  # OPTIMIZE: [20, 50, 100]

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # FEATURES - TECHNICAL
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  technical:
    enabled: true                 # OPTIMIZE: [true, false]
    
    ema:
      enabled: true               # OPTIMIZE: [true, false]
      periods: [9, 21, 50, 100, 200]  # OPTIMIZE: subsets
    
    rsi:
      enabled: true               # OPTIMIZE: [true, false]
      period: 14                  # OPTIMIZE: [7, 14, 21, 28]
      overbought: 70              # OPTIMIZE: range(65, 80)
      oversold: 30                # OPTIMIZE: range(20, 35)
    
    macd:
      enabled: true               # OPTIMIZE: [true, false]
      fast: 12                    # OPTIMIZE: [8, 12, 16]
      slow: 26                    # OPTIMIZE: [20, 26, 32]
      signal: 9                   # OPTIMIZE: [6, 9, 12]
    
    adx:
      enabled: true               # OPTIMIZE: [true, false]
      period: 14                  # OPTIMIZE: [7, 14, 21]
    
    bollinger:
      enabled: true               # OPTIMIZE: [true, false]
      period: 20                  # OPTIMIZE: [10, 20, 30]
      std_dev: 2.0                # OPTIMIZE: range(1.5, 3.0)
    
    atr:
      enabled: true               # OPTIMIZE: [true, false]
      period: 14                  # OPTIMIZE: [7, 14, 21]
    
    stochastic:
      enabled: true               # OPTIMIZE: [true, false]
      k_period: 14                # OPTIMIZE: [5, 14, 21]
      d_period: 3                 # OPTIMIZE: [3, 5, 7]
      overbought: 80              # OPTIMIZE: range(75, 85)
      oversold: 20                # OPTIMIZE: range(15, 25)

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # FEATURES - VOLUME ANALYSIS
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  volume:
    enabled: true                 # OPTIMIZE: [true, false]
    
    volume_spike:
      enabled: true               # OPTIMIZE: [true, false]
      lookback: 20                # OPTIMIZE: [10, 20, 50]
      threshold_multiplier: 2.0   # OPTIMIZE: range(1.5, 3.0)
    
    liquidity_clusters:
      enabled: true               # OPTIMIZE: [true, false]
      levels: 10                  # OPTIMIZE: [5, 10, 20]
      threshold_percentile: 80    # OPTIMIZE: range(70, 90)
    
    vwap:
      enabled: true               # OPTIMIZE: [true, false]
      periods: [20, 50, 100]      # OPTIMIZE: subsets
    
    cvd:  # Cumulative Volume Delta
      enabled: true               # OPTIMIZE: [true, false]
      window: 100                 # OPTIMIZE: [50, 100, 200]

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# REGIME DETECTION
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
regime:
  enabled: true                   # OPTIMIZE: [true, false]
  
  hmm:
    enabled: true                 # OPTIMIZE: [true, false]
    n_regimes: 3                  # OPTIMIZE: [2, 3, 4]
    features: ["returns", "volatility", "volume"]
    covariance_type: "full"       # OPTIMIZE: ["spherical", "diag", "full"]
    n_iter: 100                   # OPTIMIZE: range(50, 200)
  
  adx_based:
    enabled: true                 # OPTIMIZE: [true, false]
    trending_threshold: 25        # OPTIMIZE: range(20, 35)
    ranging_threshold: 20         # OPTIMIZE: range(15, 25)
  
  volatility_based:
    enabled: true                 # OPTIMIZE: [true, false]
    high_vol_percentile: 80       # OPTIMIZE: range(70, 90)
    low_vol_percentile: 20        # OPTIMIZE: range(10, 30)
    lookback: 100                 # OPTIMIZE: [50, 100, 200]

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# LABELING
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
labeling:
  triple_barrier:
    enabled: true                 # OPTIMIZE: [true, false]
    tp_multiplier: 2.0            # OPTIMIZE: range(1.0, 5.0)
    sl_multiplier: 1.0            # OPTIMIZE: range(0.5, 2.0)
    max_holding_bars: 100         # OPTIMIZE: range(50, 300)
    min_return: 0.001             # OPTIMIZE: range(0.0005, 0.005)
  
  meta_labeling:
    enabled: true                 # OPTIMIZE: [true, false]
    model_type: "xgboost"         # OPTIMIZE: ["xgboost", "lightgbm", "rf"]
    confidence_threshold: 0.6     # OPTIMIZE: range(0.5, 0.8)
    features: ["rsi", "adx", "ofi", "tfi", "regime"]

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# STRATEGIES
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
strategies:
  # HFT OFI Scalper
  hft_ofi_scalper:
    enabled: true                 # OPTIMIZE: [true, false]
    params:
      ofi_threshold: 0.3          # OPTIMIZE: range(0.1, 0.5)
      tfi_threshold: 0.3          # OPTIMIZE: range(0.1, 0.5)
      min_spread_bps: 1.0         # OPTIMIZE: range(0.5, 3.0)
      holding_seconds: 30         # OPTIMIZE: range(10, 120)
      min_volume: 100             # OPTIMIZE: range(50, 500)
    filters:
      adx_filter:
        enabled: true             # OPTIMIZE: [true, false]
        max_adx: 30               # OPTIMIZE: range(20, 40)
      volume_spike_filter:
        enabled: true             # OPTIMIZE: [true, false]
        min_spike_multiplier: 1.5 # OPTIMIZE: range(1.2, 2.5)
      regime_filter:
        enabled: true             # OPTIMIZE: [true, false]
        allowed_regimes: [0, 1]   # OPTIMIZE: subsets
    throttling:
      enabled: true
      max_trades_per_minute: 5    # OPTIMIZE: range(1, 10)
      cooldown_after_loss_seconds: 30  # OPTIMIZE: range(10, 120)

  # Momentum Intraday
  momentum_intraday:
    enabled: true                 # OPTIMIZE: [true, false]
    params:
      ema_fast: 9                 # OPTIMIZE: [5, 9, 12]
      ema_slow: 21                # OPTIMIZE: [15, 21, 30]
      rsi_entry_threshold: 50     # OPTIMIZE: range(40, 60)
      holding_minutes: 60         # OPTIMIZE: range(30, 240)
      macd_signal_strength: 0.0   # OPTIMIZE: range(-0.5, 0.5)
    filters:
      adx_filter:
        enabled: true             # OPTIMIZE: [true, false]
        min_adx: 25               # OPTIMIZE: range(20, 35)
      volume_confirmation:
        enabled: true             # OPTIMIZE: [true, false]
        min_volume_percentile: 60 # OPTIMIZE: range(40, 80)
      trend_alignment:
        enabled: true             # OPTIMIZE: [true, false]
        higher_tf: "1h"
    throttling:
      enabled: true
      max_trades_per_hour: 4      # OPTIMIZE: range(1, 10)

  # Mean Reversion Intraday
  mean_reversion_intraday:
    enabled: true                 # OPTIMIZE: [true, false]
    params:
      zscore_entry: 2.0           # OPTIMIZE: range(1.5, 3.0)
      zscore_exit: 0.5            # OPTIMIZE: range(0.0, 1.0)
      bollinger_entry_std: 2.0    # OPTIMIZE: range(1.5, 3.0)
      holding_minutes: 30         # OPTIMIZE: range(15, 120)
      lookback: 100               # OPTIMIZE: [50, 100, 200]
    filters:
      adx_filter:
        enabled: true             # OPTIMIZE: [true, false]
        max_adx: 20               # OPTIMIZE: range(15, 30)
      liquidity_cluster_filter:
        enabled: true             # OPTIMIZE: [true, false]
        proximity_threshold_pct: 0.5  # OPTIMIZE: range(0.2, 1.0)
      rsi_confirmation:
        enabled: true             # OPTIMIZE: [true, false]
        overbought: 70            # OPTIMIZE: range(65, 80)
        oversold: 30              # OPTIMIZE: range(20, 35)
    throttling:
      enabled: true
      max_trades_per_hour: 6      # OPTIMIZE: range(2, 12)

  # Volatility Breakout
  volatility_breakout:
    enabled: true                 # OPTIMIZE: [true, false]
    params:
      squeeze_bb_width_percentile: 20   # OPTIMIZE: range(10, 30)
      breakout_atr_multiplier: 1.5      # OPTIMIZE: range(1.0, 3.0)
      volume_confirmation_mult: 1.5     # OPTIMIZE: range(1.2, 2.5)
      holding_minutes: 120              # OPTIMIZE: range(60, 480)
      keltner_atr_mult: 1.5             # OPTIMIZE: range(1.0, 2.5)
    filters:
      adx_filter:
        enabled: true             # OPTIMIZE: [true, false]
        min_adx_after_breakout: 20  # OPTIMIZE: range(15, 30)
      time_filter:
        enabled: true             # OPTIMIZE: [true, false]
        allowed_hours: [8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]
    throttling:
      enabled: true
      max_trades_per_day: 3       # OPTIMIZE: range(1, 6)

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ENSEMBLE
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ensemble:
  enabled: true                   # OPTIMIZE: [true, false]
  weighting_method: "sharpe"      # OPTIMIZE: ["equal", "sharpe", "sortino", "calmar"]
  lookback_days: 30               # OPTIMIZE: [7, 14, 30, 60]
  min_confidence: 0.5             # OPTIMIZE: range(0.3, 0.7)
  rebalance_frequency_hours: 24   # OPTIMIZE: [6, 12, 24, 48]
  
  strategy_constraints:
    max_weight_per_strategy: 0.6  # OPTIMIZE: range(0.3, 0.8)
    min_weight_per_strategy: 0.0  # OPTIMIZE: range(0.0, 0.1)
    min_strategies_active: 2      # OPTIMIZE: [1, 2, 3]
  
  disable_strategy_if:
    max_drawdown_pct: 15.0        # OPTIMIZE: range(10.0, 25.0)
    min_sharpe: 0.5               # OPTIMIZE: range(0.0, 1.0)
    min_win_rate: 0.4             # OPTIMIZE: range(0.3, 0.5)
    max_consecutive_losses: 5     # OPTIMIZE: range(3, 10)
  
  meta_labeling_filter:
    enabled: true                 # OPTIMIZE: [true, false]
    min_meta_confidence: 0.6      # OPTIMIZE: range(0.5, 0.8)

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# RISK MANAGEMENT
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
risk:
  risk_per_trade_pct: 1.0         # OPTIMIZE: [0.25, 0.5, 1.0, 1.5, 2.0]
  max_daily_loss_pct: 3.0         # OPTIMIZE: range(1.0, 5.0)
  max_weekly_loss_pct: 7.0        # OPTIMIZE: range(3.0, 10.0)
  max_monthly_loss_pct: 15.0      # OPTIMIZE: range(10.0, 20.0)
  max_drawdown_pct: 20.0          # OPTIMIZE: range(10.0, 30.0)
  max_open_positions: 1           # OPTIMIZE: [1, 2, 3]
  max_leverage: 10                # OPTIMIZE: [3, 5, 10, 15, 20]
  
  regime_risk_adjustment:
    enabled: true                 # OPTIMIZE: [true, false]
    crash_regime_multiplier: 0.3  # OPTIMIZE: range(0.1, 0.5)
    high_vol_regime_multiplier: 0.5  # OPTIMIZE: range(0.3, 0.7)
    low_vol_regime_multiplier: 1.5   # OPTIMIZE: range(1.0, 2.0)
  
  correlation_risk:
    enabled: true                 # OPTIMIZE: [true, false]
    max_correlated_positions: 2   # OPTIMIZE: [1, 2, 3]
    correlation_threshold: 0.7    # OPTIMIZE: range(0.5, 0.9)
  
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # KILL SWITCH - NUNCA DESATIVAR!
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  kill_switch:
    enabled: true                 # NUNCA DESATIVAR! Validado no loader
    max_loss_trigger_pct: 5.0     # OPTIMIZE: range(3.0, 10.0)
    pause_duration_hours: 24      # OPTIMIZE: range(12, 48)
    check_interval_seconds: 60    # OPTIMIZE: range(30, 300)
    cooldown_multiplier: 2.0      # OPTIMIZE: range(1.0, 3.0)

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# POSITION MANAGEMENT
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
position:
  sl:  # Stop Loss
    enabled: true
    default_pct: 1.0              # OPTIMIZE: range(0.5, 3.0)
    atr_multiplier: 2.0           # OPTIMIZE: range(1.0, 4.0)
    use_atr_based: true           # OPTIMIZE: [true, false]
  
  tp:  # Take Profit
    enabled: true
    default_pct: 2.0              # OPTIMIZE: range(1.0, 5.0)
    atr_multiplier: 3.0           # OPTIMIZE: range(1.5, 6.0)
    risk_reward_ratio: 2.0        # OPTIMIZE: range(1.0, 4.0)
  
  trailing:
    enabled: true                 # OPTIMIZE: [true, false]
    activation_pct: 1.0           # OPTIMIZE: range(0.5, 2.0)
    trailing_pct: 0.5             # OPTIMIZE: range(0.2, 1.0)
    use_atr_based: true           # OPTIMIZE: [true, false]
    atr_multiplier: 1.0           # OPTIMIZE: range(0.5, 2.0)
  
  partial_exits:
    enabled: true                 # OPTIMIZE: [true, false]
    levels: [0.5, 0.75, 1.0]      # % of target
    sizes: [0.33, 0.33, 0.34]     # % of position
  
  time_based_exit:
    enabled: true                 # OPTIMIZE: [true, false]
    max_holding_hours: 24         # OPTIMIZE: range(4, 72)

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# BET SIZING
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
bet_sizing:
  method: "kelly"                 # OPTIMIZE: ["fixed", "kelly", "vol_target", "rl"]
  
  fixed:
    position_size_pct: 1.0        # OPTIMIZE: range(0.5, 3.0)
  
  kelly:
    fraction: 0.25                # OPTIMIZE: range(0.1, 0.5)
    max_kelly: 0.5                # OPTIMIZE: range(0.25, 0.75)
    lookback_trades: 100          # OPTIMIZE: range(50, 200)
  
  vol_target:
    target_annual_vol: 0.15       # OPTIMIZE: range(0.1, 0.3)
    vol_lookback: 20              # OPTIMIZE: [10, 20, 50]
    min_size_pct: 0.25            # OPTIMIZE: range(0.1, 0.5)
    max_size_pct: 2.0             # OPTIMIZE: range(1.0, 4.0)
  
  rl:
    enabled: false                # OPTIMIZE: [true, false]
    model_path: "models/rl/bet_sizing_model.zip"
    action_space: [0.25, 0.5, 0.75, 1.0, 1.5, 2.0]

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# REINFORCEMENT LEARNING
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
rl:
  enabled: true                   # OPTIMIZE: [true, false]
  train_on_colab: true
  
  environment:
    observation_features:
      - "ofi"
      - "tfi"
      - "rsi"
      - "adx"
      - "regime"
      - "position"
      - "unrealized_pnl"
      - "time_in_position"
    lookback_bars: 50             # OPTIMIZE: range(20, 100)
    normalize_observations: true
    reward_scaling: 1.0           # OPTIMIZE: range(0.1, 10.0)
  
  action_space:
    type: "discrete"              # OPTIMIZE: ["discrete", "continuous"]
    direction: [-1, 0, 1]         # SELL, HOLD, BUY
    position_size: [0.0, 0.25, 0.5, 0.75, 1.0]
    stop_loss_atr_mult: [0.5, 1.0, 1.5, 2.0, 3.0]
    take_profit_atr_mult: [1.0, 1.5, 2.0, 3.0, 5.0]
  
  agents:
    ppo:
      enabled: true               # OPTIMIZE: [true, false]
      learning_rate: 0.0003       # OPTIMIZE: range(0.00001, 0.001)
      n_steps: 2048               # OPTIMIZE: [1024, 2048, 4096]
      batch_size: 64              # OPTIMIZE: [32, 64, 128]
      n_epochs: 10                # OPTIMIZE: [5, 10, 20]
      gamma: 0.99                 # OPTIMIZE: range(0.95, 0.999)
      clip_range: 0.2             # OPTIMIZE: range(0.1, 0.3)
    
    sac:
      enabled: true               # OPTIMIZE: [true, false]
      learning_rate: 0.0003       # OPTIMIZE: range(0.00001, 0.001)
      buffer_size: 1000000        # OPTIMIZE: [100000, 500000, 1000000]
      batch_size: 256             # OPTIMIZE: [128, 256, 512]
      gamma: 0.99                 # OPTIMIZE: range(0.95, 0.999)
      tau: 0.005                  # OPTIMIZE: range(0.001, 0.01)
    
    td3:
      enabled: false              # OPTIMIZE: [true, false]
      learning_rate: 0.0003       # OPTIMIZE: range(0.00001, 0.001)
      buffer_size: 1000000
      batch_size: 256
      gamma: 0.99
      tau: 0.005
      policy_delay: 2             # OPTIMIZE: [1, 2, 3]

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ONLINE LEARNING
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
online_learning:
  enabled: true                   # OPTIMIZE: [true, false]
  
  river_models:
    enabled: true                 # OPTIMIZE: [true, false]
    model_type: "HoeffdingTree"   # OPTIMIZE: ["HoeffdingTree", "ARFF", "LinearRegression"]
    grace_period: 200             # OPTIMIZE: range(100, 500)
    delta: 1e-7                   # OPTIMIZE: range(1e-8, 1e-5)
  
  drift_detection:
    enabled: true                 # OPTIMIZE: [true, false]
    method: "ADWIN"               # OPTIMIZE: ["ADWIN", "DDM", "EDDM"]
    delta: 0.002                  # OPTIMIZE: range(0.001, 0.01)
    retrain_on_drift: true        # OPTIMIZE: [true, false]
    min_samples_before_drift: 100 # OPTIMIZE: range(50, 200)
  
  update_frequency:
    trades: 10                    # Update after N trades
    time_hours: 1                 # Update every N hours

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# OPTIMIZATION (OPTUNA)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
optimization:
  enabled: true
  n_trials: 1000                  # OPTIMIZE: range(100, 5000)
  n_jobs: -1                      # Use all cores
  study_name: "btcusdt_v2"
  storage: "sqlite:///v2/data/optuna_study.db"
  
  objectives:
    primary: "sharpe"             # OPTIMIZE: ["sharpe", "sortino", "calmar"]
    secondary: "max_drawdown"     # OPTIMIZE: ["max_drawdown", "win_rate", "profit_factor"]
    direction: ["maximize", "minimize"]
  
  pruning:
    enabled: true                 # OPTIMIZE: [true, false]
    method: "median"              # OPTIMIZE: ["median", "percentile", "hyperband"]
    min_trials_before_pruning: 50 # OPTIMIZE: range(20, 100)
  
  sampler:
    type: "TPE"                   # OPTIMIZE: ["TPE", "CMA-ES", "Random"]
    n_startup_trials: 50          # OPTIMIZE: range(20, 100)
    consider_prior: true
  
  feature_selection:
    enabled: true                 # OPTIMIZE: [true, false]
    method: "optuna"              # OPTIMIZE: ["optuna", "shap", "mutual_info"]
  
  strategy_selection:
    enabled: true                 # OPTIMIZE: [true, false]
    method: "optuna"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# BACKTEST
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
backtest:
  initial_capital: 10000
  
  slippage_model:
    type: "volume_based"          # OPTIMIZE: ["fixed", "volume_based", "spread_based"]
    base_slippage_bps: 1.0        # OPTIMIZE: range(0.5, 3.0)
    volume_impact_factor: 0.5     # OPTIMIZE: range(0.1, 1.0)
    spread_factor: 1.0            # OPTIMIZE: range(0.5, 2.0)
  
  fees:
    taker: 0.0004                 # 0.04%
    maker: 0.0002                 # 0.02%
    funding_rate_avg: 0.0001      # 0.01% per 8h
    use_maker_when_possible: true
  
  walk_forward:
    enabled: true                 # OPTIMIZE: [true, false]
    train_window_days: 60         # OPTIMIZE: [30, 60, 90]
    test_window_days: 14          # OPTIMIZE: [7, 14, 21]
    step_days: 7                  # OPTIMIZE: [3, 7, 14]
    min_train_samples: 1000       # OPTIMIZE: range(500, 2000)
  
  monte_carlo:
    enabled: true                 # OPTIMIZE: [true, false]
    n_simulations: 1000           # OPTIMIZE: range(100, 5000)
    confidence_level: 0.95        # OPTIMIZE: [0.9, 0.95, 0.99]

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# LOGGING
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
logging:
  level: "INFO"                   # DEBUG, INFO, WARNING, ERROR
  format: "parquet"
  compression: "snappy"
  partition_by: "date"
  
  console:
    enabled: true
    colored: true
    level: "INFO"
  
  file:
    enabled: true
    path: "v2/logs"
    max_size_mb: 100
    backup_count: 5
    level: "DEBUG"
  
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# V2 CONFIGURATION - ALL PARAMETERS FROM CONFIG, NO HARDCODED VALUES
# V2 TRADING BOT - DEFAULT CONFIGURATION
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# REGRA: NENHUM NÃšMERO HARDCODED - Todos os parÃ¢metros vÃªm daqui!
# V2 DEFAULT CONFIGURATION
# Todos os parÃ¢metros sÃ£o configurÃ¡veis - ZERO hardcoded
# All parameters are configurable - NO HARDCODED VALUES
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# MARKET
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
market:
  exchange: "binance_testnet"
  symbol: "BTCUSDT"
  base_timeframes: ["1s", "1m", "5m", "15m", "1h"]

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# BAR CONSTRUCTION
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
bar_construction:
  type: "time"  # TOGGLE: [time, volume, dollar]
  volume_bar_threshold: 100
  dollar_bar_threshold: 10000000
# RISK MANAGEMENT
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
risk:
  # Risk per trade - OPTIMIZE: [0.25, 0.5, 1.0, 1.5, 2.0]
  risk_per_trade_pct: 1.0
  
  # Max position size as % of balance - OPTIMIZE: [2, 5, 10, 15, 20]
  max_position_size_pct: 5.0
  
  # Daily loss limit - OPTIMIZE: [2, 3, 5, 7]
  max_daily_loss_pct: 3.0
  
  # Maximum trades per day - OPTIMIZE: [20, 50, 100]
  max_daily_trades: 50
  
  # Weekly loss limit - OPTIMIZE: [5, 7, 10, 15]
  max_weekly_loss_pct: 7.0
  
  # Monthly loss limit - OPTIMIZE: [10, 15, 20, 25]
  max_monthly_loss_pct: 15.0
  
  # Maximum drawdown - OPTIMIZE: [10, 15, 20, 25, 30]
  max_drawdown_pct: 20.0
  
  # Max concurrent positions - OPTIMIZE: [1, 2, 3, 5]
  max_concurrent_positions: 1
  
  # Max leverage - OPTIMIZE: [3, 5, 10, 15, 20]
  max_leverage: 10

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # KILL SWITCH - CRÃTICO! NUNCA DESATIVAR!
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  kill_switch:
    # âš ï¸ SEMPRE TRUE - Se tentar desativar, sistema lanÃ§a exceÃ§Ã£o!
    enabled: true
    # Trigger loss % - OPTIMIZE: [3, 5, 7, 10]
    trigger_loss_pct: 5.0
    # Pause hours after trigger - OPTIMIZE: [12, 24, 48]
    pause_hours: 24

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # REGIME ADJUSTMENT
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  regime_adjustment:
    enabled: true
    # Multiplier during crash/extreme volatility - OPTIMIZE: [0.1, 0.2, 0.3, 0.5]
    crash_multiplier: 0.3
    # Multiplier during high volatility - OPTIMIZE: [0.3, 0.5, 0.7]
    high_vol_multiplier: 0.5

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# BET SIZING
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
bet_sizing:
  # Method - TOGGLE: [fixed, kelly, vol_target, rl]
  method: "kelly"
  
  # Fixed size configuration
  fixed:
    # Size % - OPTIMIZE: [1, 2, 3, 5]
    size_pct: 2.0
  
  # Kelly criterion configuration
  kelly:
    # Fraction of Kelly - OPTIMIZE: [0.1, 0.25, 0.5, 0.75]
    fraction: 0.25
    # Max size % - OPTIMIZE: [5, 10, 15, 20]
    max_size_pct: 10.0
  
  # Volatility targeting configuration
  vol_target:
    # Target annual volatility - OPTIMIZE: [0.10, 0.15, 0.20, 0.25]
    annual_vol: 0.15
    # Base size percentage - OPTIMIZE: [1, 2, 3, 5]
    base_size_pct: 2.0
    # Max size percentage - OPTIMIZE: [5, 10, 15, 20]
    max_size_pct: 10.0

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# POSITION MANAGEMENT
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
position:
  # Stop Loss type - TOGGLE: [fixed_pct, atr, volatility]
  sl_type: "atr"
  # Fixed SL % - OPTIMIZE: [0.5, 1.0, 1.5, 2.0, 3.0]
  sl_fixed_pct: 1.0
  # ATR multiplier for SL - OPTIMIZE: [0.5, 1.0, 1.5, 2.0, 3.0]
  sl_atr_multiplier: 1.5
  
  # Take Profit type - TOGGLE: [fixed_pct, atr, rr_ratio]
  tp_type: "atr"
  # Fixed TP % - OPTIMIZE: [1.0, 1.5, 2.0, 3.0, 5.0]
  tp_fixed_pct: 2.0
  # ATR multiplier for TP - OPTIMIZE: [1.0, 1.5, 2.0, 2.5, 3.0, 5.0]
  tp_atr_multiplier: 2.5
  # Risk:Reward ratio for TP - OPTIMIZE: [1.5, 2.0, 2.5, 3.0]
  tp_rr_ratio: 2.0
  
  # Trailing Stop configuration
  trailing_stop:
    # Enable trailing stop - TOGGLE
    enabled: true
    # Type - TOGGLE: [fixed_pct, atr]
    type: "atr"
    # Activation threshold % - OPTIMIZE: [0.5, 1.0, 1.5, 2.0]
    activation_pct: 1.0
    # Trail % - OPTIMIZE: [0.3, 0.5, 0.75, 1.0]
    trail_pct: 0.5
    # ATR multiplier for trailing - OPTIMIZE: [0.5, 1.0, 1.5, 2.0]
    trail_atr_mult: 1.0
# FEATURES
# LABELING
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
labeling:
  triple_barrier:
    enabled: true
    tp_multiplier: 2.0       # OPTIMIZE: [1.0, 1.5, 2.0, 2.5, 3.0]
    sl_multiplier: 1.0       # OPTIMIZE: [0.5, 1.0, 1.5, 2.0]
    max_holding_bars: 100    # OPTIMIZE: [50, 100, 200, 500]
  meta_labeling:
    enabled: true
    model_type: "xgboost"    # TOGGLE: [xgboost, lightgbm, random_forest]
    confidence_threshold: 0.6  # OPTIMIZE: [0.5, 0.55, 0.6, 0.65, 0.7]
# All parameters are optimizable - NO HARDCODED VALUES
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# FEATURES - ALL PARAMETERS OPTIMIZABLE
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
features:
  microstructure:
    enabled: true
    ofi:
      enabled: true
      window: 20
    tfi:
      enabled: true
      window: 20
      window: 20  # OPTIMIZE: [5, 10, 20, 50, 100]
    tfi:
      enabled: true
      window: 20  # OPTIMIZE: [5, 10, 20, 50, 100]
    micro_price:
      enabled: true
    entropy:
      enabled: true
      window: 50  # OPTIMIZE: [20, 50, 100]
    vpin:
      enabled: true
      n_buckets: 50  # OPTIMIZE: [20, 50, 100]
      window: 50  # OPTIMIZE: [20, 50, 100, 200]
    vpin:
      enabled: true
      n_buckets: 50  # OPTIMIZE: [20, 50, 100]
      bucket_size_usd: 100000

  technical:
    enabled: true
    ema:
      periods: [9, 21, 50, 100, 200]
    rsi:
      enabled: true
      period: 14  # OPTIMIZE: [7, 14, 21]
      overbought: 70  # OPTIMIZE: [65, 70, 75, 80]
      oversold: 30  # OPTIMIZE: [20, 25, 30, 35]
    macd:
      enabled: true
      fast: 12  # OPTIMIZE: [8, 12, 16]
      slow: 26  # OPTIMIZE: [20, 26, 32]
      signal: 9  # OPTIMIZE: [6, 9, 12]
    adx:
      enabled: true
      period: 14  # OPTIMIZE: [10, 14, 20]
    bollinger:
      enabled: true
      period: 20  # OPTIMIZE: [10, 20, 30]
      std_dev: 2.0  # OPTIMIZE: [1.5, 2.0, 2.5, 3.0]
    atr:
      enabled: true
      period: 14  # OPTIMIZE: [7, 14, 21]

  volume_analysis:
    enabled: true
    volume_spike:
      enabled: true
      lookback: 20  # OPTIMIZE: [10, 20, 30]
      threshold_multiplier: 2.0  # OPTIMIZE: [1.5, 2.0, 2.5, 3.0]
    liquidity_clusters:
      enabled: true
      levels: 10  # OPTIMIZE: [5, 10, 20]
      threshold_percentile: 80  # OPTIMIZE: [70, 80, 90]

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# REGIME DETECTION
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
regime_detection:
  enabled: true
  hmm:
    enabled: true
    n_regimes: 3  # OPTIMIZE: [2, 3, 4]
    features_for_hmm: ["returns", "volatility", "volume"]
  adx_regime:
    enabled: true
    trending_threshold: 25  # OPTIMIZE: [20, 25, 30]
    ranging_threshold: 20  # OPTIMIZE: [15, 20, 25]

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# LABELING
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
labeling:
  triple_barrier:
    enabled: true
    tp_multiplier: 2.0  # OPTIMIZE: [1.5, 2.0, 2.5, 3.0]
    sl_multiplier: 1.0  # OPTIMIZE: [0.5, 1.0, 1.5, 2.0]
    max_holding_bars: 100  # OPTIMIZE: [50, 100, 200]
  meta_labeling:
    enabled: true
    model_type: "xgboost"  # TOGGLE: [xgboost, lightgbm, random_forest]
    confidence_threshold: 0.6  # OPTIMIZE: [0.5, 0.6, 0.7]
      period: 14
      overbought: 70
      oversold: 30
    adx:
      enabled: true
      period: 14
    bollinger:
      enabled: true
      period: 20
      std_dev: 2.0
    atr:
      enabled: true
      period: 14

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# STRATEGIES
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
strategies:
  hft_ofi_scalper:
    enabled: true
    params:
      ofi_threshold: 0.3  # OPTIMIZE: [0.1, 0.2, 0.3, 0.4, 0.5]
      tfi_threshold: 0.3  # OPTIMIZE: [0.1, 0.2, 0.3, 0.4, 0.5]
      min_spread_bps: 1.0  # OPTIMIZE: [0.5, 1.0, 2.0]
      holding_seconds: 30  # OPTIMIZE: [10, 30, 60]
    filters:
      adx_filter:
        enabled: true
        max_adx: 30  # OPTIMIZE: [25, 30, 35]
      volume_spike_filter:
        enabled: true
        min_spike_multiplier: 1.5  # OPTIMIZE: [1.2, 1.5, 2.0]
    throttling:
      enabled: true
      max_trades_per_minute: 5  # OPTIMIZE: [3, 5, 10]
      cooldown_after_loss_seconds: 30  # OPTIMIZE: [15, 30, 60]
      ofi_threshold: 0.3              # OPTIMIZE: [0.1-0.5]
      tfi_threshold: 0.3
      min_spread_bps: 1.0
      holding_seconds: 30             # OPTIMIZE: [10-300]
    filters:
      adx_filter:
        enabled: true
        max_adx: 30
      volume_spike_filter:
        enabled: true
        min_spike_multiplier: 1.5
    throttling:
      enabled: true
      max_trades_per_minute: 5
      cooldown_after_loss_seconds: 30

  momentum_intraday:
    enabled: true
    params:
      ema_fast: 9  # OPTIMIZE: [5, 9, 12]
      ema_slow: 21  # OPTIMIZE: [15, 21, 30]
      rsi_entry_threshold: 50  # OPTIMIZE: [45, 50, 55]
      holding_minutes: 60  # OPTIMIZE: [30, 60, 120]
    filters:
      adx_filter:
        enabled: true
        min_adx: 25  # OPTIMIZE: [20, 25, 30]
      volume_confirmation:
        enabled: true
        min_volume_percentile: 60  # OPTIMIZE: [50, 60, 70]
    throttling:
      enabled: true
      max_trades_per_hour: 4  # OPTIMIZE: [2, 4, 8]
      ema_fast: 9                     # OPTIMIZE: [5-15]
      ema_slow: 21                    # OPTIMIZE: [15-50]
      rsi_entry_threshold: 50
      holding_minutes: 60
    filters:
      adx_filter:
        enabled: true
        min_adx: 25
      volume_confirmation:
        enabled: true
        min_volume_percentile: 60
    throttling:
      enabled: true
      max_trades_per_hour: 4

  mean_reversion_intraday:
    enabled: true
    params:
      zscore_entry: 2.0  # OPTIMIZE: [1.5, 2.0, 2.5]
      zscore_exit: 0.5  # OPTIMIZE: [0.25, 0.5, 0.75]
      bollinger_entry_std: 2.0  # OPTIMIZE: [1.5, 2.0, 2.5]
      holding_minutes: 30  # OPTIMIZE: [15, 30, 60]
    filters:
      adx_filter:
        enabled: true
        max_adx: 20  # OPTIMIZE: [15, 20, 25]
      liquidity_cluster_filter:
        enabled: true
        proximity_threshold_pct: 0.5  # OPTIMIZE: [0.25, 0.5, 1.0]
    throttling:
      enabled: true
      max_trades_per_hour: 6  # OPTIMIZE: [4, 6, 10]
      zscore_entry: 2.0               # OPTIMIZE: [1.5-3.0]
      zscore_exit: 0.5
      bollinger_entry_std: 2.0
      holding_minutes: 30
    filters:
      adx_filter:
        enabled: true
        max_adx: 20
      liquidity_cluster_filter:
        enabled: true
        proximity_threshold_pct: 0.5
    throttling:
      enabled: true
      max_trades_per_hour: 6

  volatility_breakout:
    enabled: true
    params:
      squeeze_bb_width_percentile: 20  # OPTIMIZE: [10, 20, 30]
      breakout_atr_multiplier: 1.5  # OPTIMIZE: [1.0, 1.5, 2.0]
      volume_confirmation_mult: 1.5  # OPTIMIZE: [1.2, 1.5, 2.0]
      holding_minutes: 120  # OPTIMIZE: [60, 120, 240]
    filters:
      adx_filter:
        enabled: true
        min_adx_after_breakout: 20  # OPTIMIZE: [15, 20, 25]
    throttling:
      enabled: true
      max_trades_per_day: 3  # OPTIMIZE: [2, 3, 5]
      squeeze_bb_width_percentile: 20
      breakout_atr_mult: 1.5          # OPTIMIZE: [1.0-2.5]
      volume_confirm_mult: 1.5
      holding_minutes: 120
    filters:
      adx_filter:
        enabled: true
        min_adx_after_breakout: 20
    throttling:
      enabled: true
      max_trades_per_day: 3

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ENSEMBLE
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ensemble:
  weighting_method: "sharpe"  # TOGGLE: [sharpe, equal, inverse_vol]
  lookback_days: 30  # OPTIMIZE: [14, 30, 60]
  min_confidence: 0.5  # OPTIMIZE: [0.4, 0.5, 0.6]
  rebalance_frequency_hours: 24  # OPTIMIZE: [6, 12, 24, 48]
  strategy_constraints:
    max_weight_per_strategy: 0.6  # OPTIMIZE: [0.4, 0.6, 0.8]
    min_weight_per_strategy: 0.0
  disable_strategy_if:
    max_drawdown_pct: 15.0  # OPTIMIZE: [10, 15, 20]
    min_sharpe: 0.5  # OPTIMIZE: [0.3, 0.5, 0.7]
  meta_labeling_filter:
    enabled: true
    min_meta_confidence: 0.6  # OPTIMIZE: [0.5, 0.6, 0.7]
  weighting_method: "sharpe"          # Options: sharpe, sortino, kelly, equal
  lookback_days: 30
  min_confidence: 0.5
  rebalance_frequency_hours: 24
  strategy_constraints:
    max_weight_per_strategy: 0.6
    min_weight_per_strategy: 0.0
  disable_strategy_if:
    max_drawdown_pct: 15.0
    min_sharpe: 0.5

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# RISK MANAGEMENT
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
risk:
  max_risk_per_trade_pct: 0.5  # OPTIMIZE: [0.25, 0.5, 1.0]
  max_daily_loss_pct: 3.0  # OPTIMIZE: [2.0, 3.0, 5.0]
  max_weekly_loss_pct: 7.0  # OPTIMIZE: [5.0, 7.0, 10.0]
  max_monthly_loss_pct: 15.0  # OPTIMIZE: [10.0, 15.0, 20.0]
  max_drawdown_pct: 20.0  # OPTIMIZE: [15.0, 20.0, 25.0]
  max_open_positions: 1  # OPTIMIZE: [1, 2, 3]
  max_leverage: 10  # OPTIMIZE: [5, 10, 20]
  regime_risk_adjustment:
    enabled: true
    crash_regime_multiplier: 0.3  # OPTIMIZE: [0.1, 0.3, 0.5]
    high_vol_regime_multiplier: 0.5  # OPTIMIZE: [0.3, 0.5, 0.7]
  kill_switch:
    enabled: true  # MUST ALWAYS BE TRUE
    max_loss_trigger_pct: 5.0  # OPTIMIZE: [3.0, 5.0, 7.0]
    pause_duration_hours: 24  # OPTIMIZE: [12, 24, 48]

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# BET SIZING
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
bet_sizing:
  method: "kelly"  # TOGGLE: [kelly, vol_target, fixed, rl_dynamic]
  kelly:
    fraction: 0.25  # OPTIMIZE: [0.1, 0.25, 0.5]
    max_bet_pct: 0.1  # OPTIMIZE: [0.05, 0.1, 0.2]
  vol_target:
    target_annual_vol: 0.15  # OPTIMIZE: [0.1, 0.15, 0.2]
  fixed:
    position_size_pct: 0.02  # OPTIMIZE: [0.01, 0.02, 0.05]
  rl_dynamic:
    enabled: false
    model_path: "models/rl/bet_sizing_model.zip"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# REINFORCEMENT LEARNING
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
rl:
  enabled: true
  train_on_colab: true
  environment:
    observation_features: ["ofi", "tfi", "rsi", "adx", "regime", "position", "pnl", "drawdown"]
    action_space:
      direction: [-1, 0, 1]  # Short, Hold, Long
      position_size: [0.0, 0.25, 0.5, 0.75, 1.0]
      sl_atr_mult: [0.5, 1.0, 1.5, 2.0, 3.0]
      tp_atr_mult: [1.0, 1.5, 2.0, 3.0, 5.0]
    reward_function: "sharpe"  # TOGGLE: [pnl, sharpe, sortino, calmar]
    episode_length: 1440  # 1 day in minutes
    initial_balance: 10000
  agents:
    ppo:
      enabled: true
      learning_rate: 0.0003  # OPTIMIZE: [0.0001, 0.0003, 0.001]
      n_steps: 2048  # OPTIMIZE: [1024, 2048, 4096]
      batch_size: 64  # OPTIMIZE: [32, 64, 128]
      n_epochs: 10  # OPTIMIZE: [5, 10, 20]
      gamma: 0.99  # OPTIMIZE: [0.95, 0.99, 0.999]
      gae_lambda: 0.95  # OPTIMIZE: [0.9, 0.95, 0.99]
      clip_range: 0.2  # OPTIMIZE: [0.1, 0.2, 0.3]
    sac:
      enabled: true
      learning_rate: 0.0003  # OPTIMIZE: [0.0001, 0.0003, 0.001]
      buffer_size: 1000000  # OPTIMIZE: [100000, 1000000]
      learning_starts: 100  # OPTIMIZE: [50, 100, 200]
      batch_size: 256  # OPTIMIZE: [128, 256, 512]
      tau: 0.005  # OPTIMIZE: [0.001, 0.005, 0.01]
      gamma: 0.99  # OPTIMIZE: [0.95, 0.99, 0.999]
  training:
    total_timesteps: 100000  # OPTIMIZE: [50000, 100000, 500000]
    eval_freq: 10000
    n_eval_episodes: 5
    save_freq: 10000

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ONLINE LEARNING
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
online_learning:
  enabled: true
  river_models:
    enabled: true
    model_type: "HoeffdingTree"  # TOGGLE: [HoeffdingTree, AdaptiveRandomForest]
  drift_detection:
    enabled: true
    method: "ADWIN"  # TOGGLE: [ADWIN, DDM, EDDM]
    delta: 0.002  # OPTIMIZE: [0.001, 0.002, 0.005]
    retrain_on_drift: true

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# OPTIMIZATION (Optuna)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
optimization:
  n_trials: 1000  # OPTIMIZE: [500, 1000, 2000]
  n_jobs: -1  # -1 = use all cores
  study_name: "btcusdt_v2"
  storage_type: "sqlite"  # TOGGLE: [sqlite, postgresql]
  objectives:
    primary: "sharpe"  # TOGGLE: [sharpe, sortino, calmar, profit_factor]
    secondary: "max_drawdown"
  pruning:
    enabled: true
    min_trials: 50
    patience: 20
  feature_selection:
    enabled: true
    method: "optuna"  # TOGGLE: [optuna, shap, mutual_info]
  strategy_selection:
    enabled: true
    method: "optuna"
  sampler:
    type: "TPE"  # TOGGLE: [TPE, CMA-ES, Random]
    multivariate: true
    n_startup_trials: 10

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# BACKTEST
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
backtest:
  initial_capital: 10000
  slippage:
    type: "volume_based"  # TOGGLE: [fixed, volume_based]
    base_bps: 1.0  # OPTIMIZE: [0.5, 1.0, 2.0]
    volume_impact: 0.5  # OPTIMIZE: [0.3, 0.5, 1.0]
    spread_factor: 1.0  # OPTIMIZE: [0.5, 1.0, 1.5]
  fees:
    taker: 0.0004
    maker: 0.0002
    funding_rate: 0.0001
  walk_forward:
    enabled: true
    train_days: 60  # OPTIMIZE: [30, 60, 90]
    test_days: 14  # OPTIMIZE: [7, 14, 21]
    step_days: 7  # OPTIMIZE: [3, 7, 14]
  monte_carlo:
    enabled: true
    n_simulations: 1000
    confidence_level: 0.95

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# MODEL VERSIONING
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
model_versioning:
  enabled: true
  max_models_per_strategy: 5
  naming_convention: "{strategy}_{date}_{version}.pkl"
  rollback:
    enabled: true
    rollback_if_worse_by_pct: 10
    comparison_metric: "sharpe"
    comparison_window_days: 7
risk_management:
  max_risk_per_trade_pct: 0.5
  max_daily_loss_pct: 3.0
  max_weekly_loss_pct: 7.0
  max_monthly_loss_pct: 15.0
  max_drawdown_pct: 20.0
  max_open_positions: 1
  max_leverage: 10
      enabled: true
      periods: [9, 21, 50, 100, 200]  # OPTIMIZE: multiple period combinations
    rsi:
      enabled: true
      period: 14  # OPTIMIZE: [7, 14, 21, 28]
      overbought: 70  # OPTIMIZE: [65, 70, 75, 80]
      oversold: 30  # OPTIMIZE: [20, 25, 30, 35]
    macd:
      enabled: true
      fast: 12  # OPTIMIZE: [8, 12, 16]
      slow: 26  # OPTIMIZE: [20, 26, 30]
      signal: 9  # OPTIMIZE: [6, 9, 12]
    adx:
      enabled: true
      period: 14  # OPTIMIZE: [7, 14, 21, 28]
      trending_threshold: 25  # OPTIMIZE: [20, 25, 30, 35]
      ranging_threshold: 20  # OPTIMIZE: [15, 18, 20]
    bollinger:
      enabled: true
      period: 20  # OPTIMIZE: [10, 20, 30]
      std_dev: 2.0  # OPTIMIZE: [1.5, 2.0, 2.5, 3.0]
    atr:
      enabled: true
      period: 14  # OPTIMIZE: [7, 14, 21, 28]

  volume_analysis:
    enabled: true
    volume_spike:
      enabled: true
      lookback: 20  # OPTIMIZE: [10, 20, 30, 50]
      threshold_multiplier: 2.0  # OPTIMIZE: [1.5, 2.0, 2.5, 3.0]
    liquidity_clusters:
      enabled: true
      levels: 10  # OPTIMIZE: [5, 10, 15, 20]
      threshold_percentile: 80  # OPTIMIZE: [70, 80, 90]
      recalc_frequency: 100  # OPTIMIZE: [50, 100, 200]
      cluster_threshold_pct: 0.1  # OPTIMIZE: [0.05, 0.1, 0.2]

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# REGIME DETECTION
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
regime:
  hmm:
    enabled: true
    n_regimes: 3             # OPTIMIZE: [2, 3, 4]
    features: ["returns", "volatility", "volume"]
    covariance_type: "full"  # Options: spherical, diag, full, tied
    n_iter: 100              # Max iterations for fitting
    random_state: 42
  adx_based:
    enabled: true
    trending_threshold: 25   # OPTIMIZE: [20, 25, 30]
    ranging_threshold: 20    # OPTIMIZE: [15, 18, 20]
  volatility:
    enabled: true
    lookback: 100            # Lookback period for percentile calculation
    low_percentile: 25       # Below this = low volatility
    high_percentile: 75      # Above this = high volatility
    extreme_percentile: 95   # Above this = extreme volatility

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# REGIME RISK ADJUSTMENT
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
risk_adjustment:
  favorable_multiplier: 1.0
  neutral_multiplier: 0.7
  unfavorable_multiplier: 0.3

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# STRATEGY WEIGHTS BY REGIME
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
strategy_weights:
  trending:
    momentum: 0.6
    mean_reversion: 0.1
    volatility_breakout: 0.3
  ranging:
    momentum: 0.1
    mean_reversion: 0.6
    volatility_breakout: 0.3
  transition:
    momentum: 0.33
    mean_reversion: 0.33
    volatility_breakout: 0.34
regime_detection:
  enabled: true
  adx_regime:
    enabled: true
    trending_threshold: 25
    ranging_threshold: 20

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# LOGGING
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
logging:
  level: "INFO"  # TOGGLE: [DEBUG, INFO, WARNING, ERROR]
  format: "parquet"  # TOGGLE: [parquet, csv, json]
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  format: "parquet"
  compression: "snappy"
  partition_by: "date"
  store:
    features: true
    predictions: true
    trades: true
    pnl_by_strategy: true
    regime: true
    signals: true
    orderbook_snapshots: false    # Can be large
  
  retention_days: 90
  retention_days: 90

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# LEARNING / RETRAINING
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
learning:
  retrain_frequency_hours: 24
  training_window_days: 60
  validation_split: 0.2
  early_stopping_patience: 10
  min_samples_for_training: 1000
  retention_days: 90

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# DATA
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
data:
  parquet_path: "v2/data/parquet"
  raw_path: "v2/data/raw"
  processed_path: "v2/data/processed"
